{"ast":null,"code":"import { environment } from 'src/environments/environment';\nimport { Subject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@auth0/angular-jwt\";\nimport * as i3 from \"@angular/router\";\nexport class UtilisateurService {\n  constructor(http, jwtHelper, route, router) {\n    this.http = http;\n    this.jwtHelper = jwtHelper;\n    this.route = route;\n    this.router = router;\n    this.apiUrl = environment.apiUrl + 'Utilisateur';\n    this.authChangeSub = new Subject();\n    this.authChanged = this.authChangeSub.asObservable();\n    this.logout = () => {\n      localStorage.clear();\n      this.sendAuthStateChangeNotification(false);\n    };\n    this.sendAuthStateChangeNotification = isAuthenticated => {\n      this.authChangeSub.next(isAuthenticated);\n    };\n    this.isUserAuthenticated = () => {\n      const token = localStorage.getItem(\"token\");\n      this.usernamebar = localStorage.getItem(\"username\");\n      this.rolebar = localStorage.getItem(\"role\");\n      let bool;\n      if (token && !this.jwtHelper.isTokenExpired(token)) {\n        bool = true;\n      } else bool = false;\n      console.log(username, role, bool);\n      return bool;\n    };\n  }\n  Inscription(Utilisateur) {\n    return this.http.post(this.apiUrl + \"/inscription\", Utilisateur);\n  }\n  login(login) {\n    return this.http.post(this.apiUrl + \"/login\", login);\n  }\n  getUtilisateurs() {\n    return this.http.get(this.apiUrl + \"/List\");\n  }\n  getUtilisateur(id) {\n    return this.http.get(`${this.apiUrl}/Get/${id}`);\n  }\n  Recherche(rech) {\n    return this.http.get(`${this.apiUrl}/${rech}`);\n  }\n  addUtilisateur(Utilisateur) {\n    return this.http.post(this.apiUrl + \"/ajouter\", Utilisateur);\n  }\n  updateUtilisateur(id, Utilisateur) {\n    return this.http.put(`${this.apiUrl}/modifier/${id}`, Utilisateur);\n  }\n  deleteUtilisateur(Id) {\n    return this.http.delete(`${this.apiUrl}/supprimer/${Id}`);\n  }\n  static #_ = this.ɵfac = function UtilisateurService_Factory(t) {\n    return new (t || UtilisateurService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.JwtHelperService), i0.ɵɵinject(i3.ActivatedRoute), i0.ɵɵinject(i3.Router));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: UtilisateurService,\n    factory: UtilisateurService.ɵfac,\n    providedIn: 'root'\n  });\n}","map":{"version":3,"mappings":"AAAA,SAASA,WAAW,QAAQ,8BAA8B;AAG1D,SAAqBC,OAAO,QAAQ,MAAM;;;;;AAQ1C,OAAM,MAAOC,kBAAkB;EAO7BC,YAAoBC,IAAgB,EAAUC,SAA2B,EAAUC,KAAqB,EAAUC,MAAc;IAA5G,SAAI,GAAJH,IAAI;IAAsB,cAAS,GAATC,SAAS;IAA4B,UAAK,GAALC,KAAK;IAA0B,WAAM,GAANC,MAAM;IANhH,WAAM,GAAGP,WAAW,CAACQ,MAAM,GAAG,aAAa;IAC3C,kBAAa,GAAG,IAAIP,OAAO,EAAW;IACvC,gBAAW,GAAG,IAAI,CAACQ,aAAa,CAACC,YAAY,EAAE;IAetD,WAAM,GAAG,MAAK;MACZC,YAAY,CAACC,KAAK,EAAE;MACpB,IAAI,CAACC,+BAA+B,CAAC,KAAK,CAAC;IAC7C,CAAC;IAED,oCAA+B,GAAIC,eAAwB,IAAI;MAC7D,IAAI,CAACL,aAAa,CAACM,IAAI,CAACD,eAAe,CAAC;IAC1C,CAAC;IAED,wBAAmB,GAAG,MAAc;MAClC,MAAME,KAAK,GAAGL,YAAY,CAACM,OAAO,CAAC,OAAO,CAAC;MAC3C,IAAI,CAACC,WAAW,GAAGP,YAAY,CAACM,OAAO,CAAC,UAAU,CAAC;MACnD,IAAI,CAACE,OAAO,GAAGR,YAAY,CAACM,OAAO,CAAC,MAAM,CAAC;MAC3C,IAAIG,IAAc;MAClB,IAAIJ,KAAK,IAAI,CAAC,IAAI,CAACX,SAAS,CAACgB,cAAc,CAACL,KAAK,CAAC,EAAE;QAAEI,IAAI,GAAG,IAAI;OAAG,MAAMA,IAAI,GAAG,KAAK;MACtFE,OAAO,CAACC,GAAG,CAACC,QAAQ,EAAEC,IAAI,EAAEL,IAAI,CAAC;MACjC,OAAOA,IAAI;IACb,CAAC;EA5BiI;EAGlIM,WAAW,CAACC,WAAgB;IAC1B,OAAO,IAAI,CAACvB,IAAI,CAACwB,IAAI,CAAM,IAAI,CAACpB,MAAM,GAAG,cAAc,EAAEmB,WAAW,CAAC;EACvE;EAEAE,KAAK,CAACA,KAAU;IACd,OAAO,IAAI,CAACzB,IAAI,CAACwB,IAAI,CAAC,IAAI,CAACpB,MAAM,GAAG,QAAQ,EAAEqB,KAAK,CAAC;EACtD;EAqBAC,eAAe;IACb,OAAO,IAAI,CAAC1B,IAAI,CAAC2B,GAAG,CAAQ,IAAI,CAACvB,MAAM,GAAG,OAAO,CAAC;EACpD;EAEAwB,cAAc,CAACC,EAAU;IACvB,OAAO,IAAI,CAAC7B,IAAI,CAAC2B,GAAG,CAAM,GAAG,IAAI,CAACvB,MAAM,QAAQyB,EAAE,EAAE,CAAC;EACvD;EAEAC,SAAS,CAACC,IAAmB;IAC3B,OAAO,IAAI,CAAC/B,IAAI,CAAC2B,GAAG,CAAM,GAAG,IAAI,CAACvB,MAAM,IAAI2B,IAAI,EAAE,CAAC;EACrD;EAEAC,cAAc,CAACT,WAAgB;IAC7B,OAAO,IAAI,CAACvB,IAAI,CAACwB,IAAI,CAAM,IAAI,CAACpB,MAAM,GAAG,UAAU,EAAEmB,WAAW,CAAC;EACnE;EAEAU,iBAAiB,CAACJ,EAAgB,EAAEN,WAAgB;IAClD,OAAO,IAAI,CAACvB,IAAI,CAACkC,GAAG,CAAM,GAAG,IAAI,CAAC9B,MAAM,aAAayB,EAAE,EAAE,EAAEN,WAAW,CAAC;EACzE;EAEAY,iBAAiB,CAACC,EAAU;IAC1B,OAAO,IAAI,CAACpC,IAAI,CAACqC,MAAM,CAAM,GAAG,IAAI,CAACjC,MAAM,cAAcgC,EAAE,EAAE,CAAC;EAChE;EAAC;qBA3DUtC,kBAAkB;EAAA;EAAA;WAAlBA,kBAAkB;IAAAwC,SAAlBxC,kBAAkB;IAAAyC,YADJ;EAAM","names":["environment","Subject","UtilisateurService","constructor","http","jwtHelper","route","router","apiUrl","authChangeSub","asObservable","localStorage","clear","sendAuthStateChangeNotification","isAuthenticated","next","token","getItem","usernamebar","rolebar","bool","isTokenExpired","console","log","username","role","Inscription","Utilisateur","post","login","getUtilisateurs","get","getUtilisateur","id","Recherche","rech","addUtilisateur","updateUtilisateur","put","deleteUtilisateur","Id","delete","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\Skander\\source\\repos\\WBAuth.Frontend\\ClientApp\\src\\app\\Services\\utilisateur.service.ts"],"sourcesContent":["import { environment } from 'src/environments/environment';\r\nimport { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\r\nimport { Observable, Subject } from 'rxjs';\r\nimport { JwtHelperService } from '@auth0/angular-jwt';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ApplicationService } from './application.service';\r\nimport { RoleService } from './role.service';\r\n\r\n\r\n@Injectable({  providedIn: 'root',})\r\nexport class UtilisateurService {\r\n  private apiUrl = environment.apiUrl + 'Utilisateur'; \r\n  private authChangeSub = new Subject<boolean>()\r\n  public authChanged = this.authChangeSub.asObservable();\r\n  public usernamebar!: string | null;\r\n  public rolebar!: string | null;\r\n\r\n  constructor(private http: HttpClient, private jwtHelper: JwtHelperService, private route: ActivatedRoute, private router: Router){}\r\n\r\n\r\n  Inscription(Utilisateur: any): Observable<any>{\r\n    return this.http.post<any>(this.apiUrl + \"/inscription\" ,Utilisateur);\r\n  }\r\n\r\n  login(login: any): Observable<any>{\r\n    return this.http.post(this.apiUrl + \"/login\", login);\r\n  }\r\n\r\n  logout = () => {\r\n    localStorage.clear();\r\n    this.sendAuthStateChangeNotification(false);\r\n  }\r\n\r\n  sendAuthStateChangeNotification = (isAuthenticated: boolean) => {\r\n    this.authChangeSub.next(isAuthenticated);\r\n  }\r\n\r\n  isUserAuthenticated = (): boolean => {\r\n    const token = localStorage.getItem(\"token\");\r\n    this.usernamebar = localStorage.getItem(\"username\");\r\n    this.rolebar = localStorage.getItem(\"role\");\r\n    let bool!: boolean;\r\n    if (token && !this.jwtHelper.isTokenExpired(token)) { bool = true; } else bool = false;\r\n    console.log(username ,role ,bool);\r\n    return bool;\r\n  }\r\n\r\n  getUtilisateurs(): Observable<any[]> {\r\n    return this.http.get<any[]>(this.apiUrl + \"/List\");\r\n  }\r\n\r\n  getUtilisateur(id: string): Observable<any> {\r\n    return this.http.get<any>(`${this.apiUrl}/Get/${id}`);\r\n  }\r\n\r\n  Recherche(rech: string | null): Observable<any> {\r\n    return this.http.get<any>(`${this.apiUrl}/${rech}`);\r\n  }\r\n\r\n  addUtilisateur(Utilisateur: any): Observable<any> {\r\n    return this.http.post<any>(this.apiUrl + \"/ajouter\", Utilisateur);\r\n  }\r\n\r\n  updateUtilisateur(id:string | null ,Utilisateur: any): Observable<any> {\r\n    return this.http.put<any>(`${this.apiUrl}/modifier/${id}`, Utilisateur);\r\n  }\r\n\r\n  deleteUtilisateur(Id: string): Observable<any> {\r\n    return this.http.delete<any>(`${this.apiUrl}/supprimer/${Id}`);\r\n  }\r\n\r\n\r\n\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}