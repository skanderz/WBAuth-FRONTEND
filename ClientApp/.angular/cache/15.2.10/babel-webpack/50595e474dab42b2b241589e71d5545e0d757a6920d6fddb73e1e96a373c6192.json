{"ast":null,"code":"import { environment } from 'src/environments/environment';\nimport { Subject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@auth0/angular-jwt\";\nimport * as i3 from \"@angular/router\";\nexport class UtilisateurService {\n  constructor(http, jwtHelper, route, router) {\n    this.http = http;\n    this.jwtHelper = jwtHelper;\n    this.route = route;\n    this.router = router;\n    this.apiUrl = environment.apiUrl + 'Utilisateur';\n    this.authChangeSub = new Subject();\n    this.authChanged = this.authChangeSub.asObservable();\n    this.logout = () => {\n      localStorage.clear();\n      this.sendAuthStateChangeNotification(false);\n    };\n    this.sendAuthStateChangeNotification = isAuthenticated => {\n      this.authChangeSub.next(isAuthenticated);\n    };\n    this.isUserAuthenticated = () => {\n      const token = localStorage.getItem(\"token\");\n      let bool;\n      if (token && !this.jwtHelper.isTokenExpired(token)) {\n        bool = true;\n      } else bool = false;\n      console.log(\"token : \" + bool);\n      return bool;\n    };\n  }\n  Inscription(Utilisateur) {\n    return this.http.post(this.apiUrl + \"/inscription\", Utilisateur);\n  }\n  login(login) {\n    return this.http.post(this.apiUrl + \"/login\", login);\n  }\n  forgotPassword(ForgotPassword) {\n    return this.http.post(this.apiUrl + \"/forgotPassword\", ForgotPassword);\n  }\n  resetPassword(ResetPassword) {\n    return this.http.post(this.apiUrl + \"/resetPassword\", ResetPassword);\n  }\n  checkPassword(email, passwordToCheck) {\n    return this.http.post(`${this.apiUrl}/checkPassword/${email}/${passwordToCheck}`);\n  }\n  getUtilisateurs() {\n    return this.http.get(this.apiUrl + \"/List\");\n  }\n  getUtilisateur(id) {\n    return this.http.get(`${this.apiUrl}/Get/${id}`);\n  }\n  Recherche(rech) {\n    return this.http.get(`${this.apiUrl}/${rech}`);\n  }\n  addUtilisateur(Utilisateur) {\n    return this.http.post(this.apiUrl + \"/ajouter\", Utilisateur);\n  }\n  updateUtilisateur(id, Utilisateur) {\n    return this.http.put(`${this.apiUrl}/modifier/${id}`, Utilisateur);\n  }\n  deleteUtilisateur(Id) {\n    return this.http.delete(`${this.apiUrl}/supprimer/${Id}`);\n  }\n  static #_ = this.ɵfac = function UtilisateurService_Factory(t) {\n    return new (t || UtilisateurService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.JwtHelperService), i0.ɵɵinject(i3.ActivatedRoute), i0.ɵɵinject(i3.Router));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: UtilisateurService,\n    factory: UtilisateurService.ɵfac,\n    providedIn: 'root'\n  });\n}","map":{"version":3,"mappings":"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","names":["environment","Subject","UtilisateurService","constructor","http","jwtHelper","route","router","apiUrl","authChangeSub","asObservable","localStorage","clear","sendAuthStateChangeNotification","isAuthenticated","next","token","getItem","bool","isTokenExpired","console","log","Inscription","Utilisateur","post","login","forgotPassword","ForgotPassword","resetPassword","ResetPassword","checkPassword","email","passwordToCheck","getUtilisateurs","get","getUtilisateur","id","Recherche","rech","addUtilisateur","updateUtilisateur","put","deleteUtilisateur","Id","delete","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\Skander\\source\\repos\\WBAuth.Frontend\\ClientApp\\src\\app\\Services\\utilisateur.service.ts"],"sourcesContent":["import { environment } from 'src/environments/environment';\r\nimport { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\r\nimport { Observable, Subject } from 'rxjs';\r\nimport { JwtHelperService } from '@auth0/angular-jwt';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ApplicationService } from './application.service';\r\nimport { RoleService } from './role.service';\r\n\r\n\r\n@Injectable({  providedIn: 'root',})\r\nexport class UtilisateurService {\r\n  private apiUrl = environment.apiUrl + 'Utilisateur'; \r\n  private authChangeSub = new Subject<boolean>()\r\n  public authChanged = this.authChangeSub.asObservable();\r\n\r\n  constructor(private http: HttpClient, private jwtHelper: JwtHelperService, private route: ActivatedRoute, private router: Router){}\r\n\r\n\r\n  Inscription(Utilisateur: any): Observable<any>{\r\n    return this.http.post<any>(this.apiUrl + \"/inscription\" ,Utilisateur);\r\n  }\r\n\r\n  login(login: any): Observable<any>{\r\n    return this.http.post(this.apiUrl + \"/login\", login);\r\n  }\r\n\r\n  logout = () => {\r\n    localStorage.clear();\r\n    this.sendAuthStateChangeNotification(false);\r\n  }\r\n\r\n  forgotPassword(ForgotPassword : any): Observable<any> {\r\n    return this.http.post(this.apiUrl + \"/forgotPassword\", ForgotPassword);\r\n  }\r\n\r\n  resetPassword(ResetPassword: any): Observable<any> {\r\n    return this.http.post(this.apiUrl + \"/resetPassword\", ResetPassword);\r\n  }\r\n\r\n  checkPassword(email:string ,passwordToCheck:string): Observable<any> {\r\n    return this.http.post(`${this.apiUrl}/checkPassword/${email}/${passwordToCheck}`); \r\n  }\r\n\r\n  sendAuthStateChangeNotification = (isAuthenticated: boolean) => {\r\n    this.authChangeSub.next(isAuthenticated);\r\n  }\r\n\r\n  isUserAuthenticated = (): boolean => {\r\n    const token = localStorage.getItem(\"token\");\r\n    let bool!: boolean;\r\n    if (token && !this.jwtHelper.isTokenExpired(token)) { bool = true; } else bool = false;\r\n    console.log(\"token : \" + bool);\r\n    return bool;\r\n  }\r\n\r\n  getUtilisateurs(): Observable<any[]> {\r\n    return this.http.get<any[]>(this.apiUrl + \"/List\");\r\n  }\r\n\r\n  getUtilisateur(id: string): Observable<any> {\r\n    return this.http.get<any>(`${this.apiUrl}/Get/${id}`);\r\n  }\r\n\r\n  Recherche(rech: string | null): Observable<any> {\r\n    return this.http.get<any>(`${this.apiUrl}/${rech}`);\r\n  }\r\n\r\n  addUtilisateur(Utilisateur: any): Observable<any> {\r\n    return this.http.post<any>(this.apiUrl + \"/ajouter\", Utilisateur);\r\n  }\r\n\r\n  updateUtilisateur(id:string | null ,Utilisateur: any): Observable<any> {\r\n    return this.http.put<any>(`${this.apiUrl}/modifier/${id}`, Utilisateur);\r\n  }\r\n\r\n  deleteUtilisateur(Id: string): Observable<any> {\r\n    return this.http.delete<any>(`${this.apiUrl}/supprimer/${Id}`);\r\n  }\r\n\r\n\r\n\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}