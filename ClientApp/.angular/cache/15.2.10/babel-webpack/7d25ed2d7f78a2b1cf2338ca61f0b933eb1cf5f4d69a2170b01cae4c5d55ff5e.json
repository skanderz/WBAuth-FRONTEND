{"ast":null,"code":"import { UtilisateurApplication } from '../../Models/utilisateurapplication.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../Services/utilisateurapplication.service\";\nimport * as i2 from \"../../Services/application.service\";\nimport * as i3 from \"../../Services/utilisateur.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nconst _c0 = function () {\n  return [\"/Utilisateur/ModifierUtilisateur\"];\n};\nfunction UtilisateurComponent_table_23_tr_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14, \" \\u00A0 \");\n    i0.ɵɵelementStart(15, \"i\", 18);\n    i0.ɵɵlistener(\"click\", function UtilisateurComponent_table_23_tr_18_Template_i_click_15_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const Utilisateur_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.onModifierClick(Utilisateur_r2.id));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16, \" \\u00A0 \");\n    i0.ɵɵelementStart(17, \"i\", 19);\n    i0.ɵɵlistener(\"click\", function UtilisateurComponent_table_23_tr_18_Template_i_click_17_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const Utilisateur_r2 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.deleteUtilisateur(Utilisateur_r2.id));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18, \"\\u00A0 \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const Utilisateur_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(Utilisateur_r2.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(Utilisateur_r2.userName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(Utilisateur_r2.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(Utilisateur_r2.nom);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(Utilisateur_r2.prenom);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(Utilisateur_r2.status === true ? \"Activ\\u00E9\" : \"Desactiv\\u00E9\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(7, _c0));\n  }\n}\nfunction UtilisateurComponent_table_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 16)(1, \"thead\")(2, \"tr\")(3, \"th\");\n    i0.ɵɵtext(4, \"GUID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"UTILISATEUR\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"EMAIL\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"NOM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\");\n    i0.ɵɵtext(12, \"PRENOM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"th\");\n    i0.ɵɵtext(14, \"STATUS\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"th\");\n    i0.ɵɵtext(16, \"ACTION\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(17, \"tbody\");\n    i0.ɵɵtemplate(18, UtilisateurComponent_table_23_tr_18_Template, 19, 8, \"tr\", 17);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(18);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.Utilisateurs);\n  }\n}\nconst _c1 = function () {\n  return [\"/Utilisateur\"];\n};\nconst _c2 = function () {\n  return [\"user-button-active\"];\n};\nconst _c3 = function () {\n  return {\n    exact: true\n  };\n};\nconst _c4 = function () {\n  return [\"/Utilisateur/Acces\"];\n};\nconst _c5 = function () {\n  return [\"/Utilisateur/Activite\"];\n};\nconst _c6 = function () {\n  return [\"/Utilisateur/AjouterUtilisateur\"];\n};\nexport class UtilisateurComponent {\n  constructor(UAService, ApplicationService, UtilisateurService, router, route) {\n    this.UAService = UAService;\n    this.ApplicationService = ApplicationService;\n    this.UtilisateurService = UtilisateurService;\n    this.router = router;\n    this.route = route;\n    this.Utilisateurs = [];\n    this.rech = \"\";\n    this.IdApp = 0;\n    this.applications = [];\n    this.UtilisateurApp = new UtilisateurApplication();\n    this.UtilisateurApps = [];\n  }\n  ngOnInit() {\n    this.loadUtilisateur();\n  }\n  loadUtilisateur() {\n    this.UtilisateurService.getUtilisateurs().subscribe(data => {\n      this.Utilisateurs = data; // userlist\n      console.log(this.Utilisateurs);\n      for (const user of this.Utilisateurs) {\n        // chaque user\n        this.UAService.getListByUtilisateur(user.id).subscribe(UAdata => {\n          this.ApplicationService.getApplications().subscribe(AppData => {\n            this.applications = AppData; // App list \n            for (const app of this.applications) {\n              this.UtilisateurApps = UAdata; // userApp list\n              const result = this.UtilisateurApps.filter(ua => ua.guidUtilisateur == user.id && ua.idApplication == app.id);\n              if (result.length == 0) {\n                this.UtilisateurApp.idRole = null;\n                this.UtilisateurApp.idApplication = app.id;\n                this.UtilisateurApp.guidUtilisateur = user.id;\n                console.log(this.UtilisateurApp);\n                this.UAService.AddUtilisateurApplication(this.UtilisateurApp).subscribe(response => {\n                  if (response) {\n                    console.log(this.UtilisateurApp);\n                  }\n                });\n              }\n            }\n          });\n        });\n      }\n    }, error => {\n      console.error('Erreur lors de la récupération des Utilisateur : ', error);\n    });\n  }\n  Recherche() {\n    if (this.rech == \"\") this.loadUtilisateur();else this.UtilisateurService.Recherche(this.rech).subscribe(data => {\n      this.Utilisateurs = data;\n    });\n  }\n  onModifierClick(id) {\n    this.router.navigate(['Utilisateur/ModifierUtilisateur', id]);\n  }\n  deleteUtilisateur(id) {\n    console.log(id);\n    if (confirm('Voulez-vous vraiment supprimer ce utilisateur ?')) {\n      this.UtilisateurService.deleteUtilisateur(id).subscribe(() => {\n        console.log(this.route.snapshot.paramMap);\n        this.loadUtilisateur();\n      });\n    }\n  }\n  static #_ = this.ɵfac = function UtilisateurComponent_Factory(t) {\n    return new (t || UtilisateurComponent)(i0.ɵɵdirectiveInject(i1.UtilisateurApplicationService), i0.ɵɵdirectiveInject(i2.ApplicationService), i0.ɵɵdirectiveInject(i3.UtilisateurService), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i4.ActivatedRoute));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UtilisateurComponent,\n    selectors: [[\"app-Utilisateur\"]],\n    decls: 24,\n    vars: 18,\n    consts: [[1, \"background-titre\"], [1, \"centered-element\"], [1, \"content\"], [2, \"display\", \"flex\", \"justify-content\", \"center\"], [\"id\", \"user-button\", 1, \"user-button\", 3, \"routerLink\", \"routerLinkActive\", \"routerLinkActiveOptions\"], [1, \"fa-solid\", \"fa-list\"], [\"id\", \"user-button\", 1, \"user-button\", 3, \"routerLink\", \"routerLinkActive\"], [1, \"fa-solid\", \"fa-user-lock\"], [1, \"fa-solid\", \"fa-clock-rotate-left\"], [1, \"search-bar-and-add\"], [1, \"add-button\", 3, \"routerLink\"], [1, \"fas\", \"fa-plus\", 2, \"color\", \"#1ddd92\"], [\"type\", \"text\", \"placeholder\", \"Rechercher...\", 1, \"search-input\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [\"type\", \"submit\", 1, \"search-button\"], [1, \"fas\", \"fa-search\"], [\"aria-labelledby\", \"tableLabel\", 4, \"ngIf\"], [\"aria-labelledby\", \"tableLabel\"], [4, \"ngFor\", \"ngForOf\"], [1, \"far\", \"fa-edit\", 2, \"color\", \"#e6c347\", 3, \"routerLink\", \"click\"], [1, \"far\", \"fa-trash-alt\", 2, \"color\", \"#de0707\", 3, \"click\"]],\n    template: function UtilisateurComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n        i0.ɵɵtext(2, \" GESTION DES UTILISATEURS \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(3, \"div\", 1)(4, \"div\", 2)(5, \"div\", 3)(6, \"button\", 4);\n        i0.ɵɵelement(7, \"i\", 5);\n        i0.ɵɵtext(8, \" \\u00A0 LISTE \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"button\", 6);\n        i0.ɵɵelement(10, \"i\", 7);\n        i0.ɵɵtext(11, \" \\u00A0 ACC\\u00C8S \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"button\", 6);\n        i0.ɵɵelement(13, \"i\", 8);\n        i0.ɵɵtext(14, \" \\u00A0 ACTIVIT\\u00C9 \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(15, \"div\", 9)(16, \"button\", 10);\n        i0.ɵɵelement(17, \"i\", 11);\n        i0.ɵɵtext(18, \" \\u00A0 AJOUTER \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"input\", 12);\n        i0.ɵɵlistener(\"ngModelChange\", function UtilisateurComponent_Template_input_ngModelChange_19_listener($event) {\n          return ctx.rech = $event;\n        })(\"input\", function UtilisateurComponent_Template_input_input_19_listener() {\n          return ctx.Recherche();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"button\", 13);\n        i0.ɵɵelement(21, \"i\", 14);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(22, \"br\");\n        i0.ɵɵtemplate(23, UtilisateurComponent_table_23_Template, 19, 1, \"table\", 15);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(10, _c1))(\"routerLinkActive\", i0.ɵɵpureFunction0(11, _c2))(\"routerLinkActiveOptions\", i0.ɵɵpureFunction0(12, _c3));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(13, _c4))(\"routerLinkActive\", i0.ɵɵpureFunction0(14, _c2));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(15, _c5))(\"routerLinkActive\", i0.ɵɵpureFunction0(16, _c2));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(17, _c6));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.rech);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.Utilisateurs);\n      }\n    },\n    dependencies: [i5.NgForOf, i5.NgIf, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgModel, i4.RouterLink, i4.RouterLinkActive],\n    encapsulation: 2\n  });\n}","map":{"version":3,"mappings":"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","names":["UtilisateurApplication","i0","UtilisateurComponent","constructor","UAService","ApplicationService","UtilisateurService","router","route","ngOnInit","loadUtilisateur","getUtilisateurs","subscribe","data","Utilisateurs","console","log","user","getListByUtilisateur","id","UAdata","getApplications","AppData","applications","app","UtilisateurApps","result","filter","ua","guidUtilisateur","idApplication","length","UtilisateurApp","idRole","AddUtilisateurApplication","response","error","Recherche","rech","onModifierClick","navigate","deleteUtilisateur","confirm","snapshot","paramMap","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Skander\\source\\repos\\WBAuth.Frontend\\ClientApp\\src\\app\\Modules\\Utilisateur\\Utilisateur.component.ts","C:\\Users\\Skander\\source\\repos\\WBAuth.Frontend\\ClientApp\\src\\app\\Modules\\Utilisateur\\Utilisateur.component.html"],"sourcesContent":["import { Component, Inject } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Utilisateur } from '../../Models/utilisateur.model';\r\nimport { filter, Observable } from 'rxjs';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { UtilisateurService } from '../../Services/utilisateur.service';\r\nimport { UtilisateurApplicationService } from '../../Services/utilisateurapplication.service';\r\nimport { UtilisateurApplication } from '../../Models/utilisateurapplication.model';\r\nimport { Application } from '../../Models/application.model';\r\nimport { ApplicationService } from '../../Services/application.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-Utilisateur',\r\n  templateUrl: './Utilisateur.component.html'\r\n})\r\nexport class UtilisateurComponent {\r\n  Utilisateurs: any[] = [];\r\n  rech: string = \"\";\r\n  IdApp: number = 0;\r\n  applications: any[] = [];\r\n  UtilisateurApp: UtilisateurApplication = new UtilisateurApplication(); \r\n  UtilisateurApps: UtilisateurApplication[] = [];\r\n\r\n  constructor(private UAService: UtilisateurApplicationService, private ApplicationService: ApplicationService\r\n    ,private UtilisateurService: UtilisateurService, private router: Router, private route: ActivatedRoute){}\r\n\r\n\r\n  ngOnInit(): void {\r\n    this.loadUtilisateur();\r\n  }\r\n\r\n\r\n\r\n  loadUtilisateur() {\r\n    this.UtilisateurService.getUtilisateurs().subscribe((data) => {\r\n      this.Utilisateurs = data; // userlist\r\n      console.log(this.Utilisateurs);\r\n       for(const user of this.Utilisateurs){ // chaque user\r\n         this.UAService.getListByUtilisateur(user.id).subscribe((UAdata) => {\r\n            this.ApplicationService.getApplications().subscribe((AppData) => {\r\n              this.applications = AppData; // App list \r\n              for (const app of this.applications) {\r\n                this.UtilisateurApps = UAdata;  // userApp list\r\n                const result = this.UtilisateurApps.filter((ua) => (ua.guidUtilisateur == user.id) && (ua.idApplication == app.id));\r\n                if (result.length == 0) {\r\n                  this.UtilisateurApp.idRole = null;\r\n                  this.UtilisateurApp.idApplication = app.id;\r\n                  this.UtilisateurApp.guidUtilisateur = user.id;\r\n                  console.log(this.UtilisateurApp);\r\n                  this.UAService.AddUtilisateurApplication(this.UtilisateurApp).subscribe((response) => {\r\n                    if (response) { console.log(this.UtilisateurApp); }\r\n                  });\r\n                }\r\n              }\r\n            });\r\n          });\r\n       }\r\n    }, (error) => { console.error('Erreur lors de la récupération des Utilisateur : ', error); });\r\n  }\r\n  \r\n\r\n  Recherche(){\r\n    if (this.rech == \"\") this.loadUtilisateur();\r\n    else this.UtilisateurService.Recherche(this.rech).subscribe((data) => { this.Utilisateurs = data; });\r\n  }\r\n\r\n\r\n  onModifierClick(id:string) { this.router.navigate(['Utilisateur/ModifierUtilisateur', id]); }\r\n\r\n\r\n  deleteUtilisateur(id: string) {\r\n    console.log(id);\r\n    if (confirm('Voulez-vous vraiment supprimer ce utilisateur ?')) {\r\n      this.UtilisateurService.deleteUtilisateur(id).subscribe(() => {\r\n        console.log(this.route.snapshot.paramMap);\r\n        this.loadUtilisateur();\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","<div class=\"background-titre\"> <h1> GESTION DES UTILISATEURS </h1> </div>\r\n<div class=\"centered-element\">\r\n  <div class=\"content\">\r\n\r\n    <div style=\"display:flex; justify-content:center;\">\r\n      <button class=\"user-button\" id=\"user-button\" [routerLink]=\"['/Utilisateur']\" [routerLinkActive]=\"['user-button-active']\" [routerLinkActiveOptions]=\"{ exact: true }\">\r\n        <i class=\"fa-solid fa-list\"></i>  &nbsp; LISTE\r\n      </button>\r\n      <button class=\"user-button\" id=\"user-button\" [routerLink]=\"['/Utilisateur/Acces']\" [routerLinkActive]=\"['user-button-active']\" >\r\n        <i class=\"fa-solid fa-user-lock\"></i> &nbsp; ACCÈS\r\n      </button>\r\n      <button class=\"user-button\" id=\"user-button\" [routerLink]=\"['/Utilisateur/Activite']\" [routerLinkActive]=\"['user-button-active']\" >\r\n        <i class=\"fa-solid fa-clock-rotate-left\"></i>  &nbsp; ACTIVITÉ\r\n      </button>\r\n    </div>\r\n\r\n\r\n    <div class=\"search-bar-and-add\">\r\n      <button class=\"add-button\" [routerLink]=\"['/Utilisateur/AjouterUtilisateur']\">\r\n        <i class=\"fas fa-plus\" style=\"color: #1ddd92;\"></i>  &nbsp;  AJOUTER\r\n      </button>\r\n      <input [(ngModel)]=\"rech\" (input)=\"Recherche()\" class=\"search-input\" type=\"text\" placeholder=\"Rechercher...\">\r\n      <button class=\"search-button\" type=\"submit\"><i class=\"fas fa-search\"></i></button>\r\n    </div>\r\n    <br />\r\n\r\n    <table aria-labelledby=\"tableLabel\" *ngIf=\"Utilisateurs\">\r\n      <thead>\r\n        <tr>\r\n          <th>GUID</th>\r\n          <th>UTILISATEUR</th>\r\n          <th>EMAIL</th>\r\n          <th>NOM</th>\r\n          <th>PRENOM</th>\r\n          <th>STATUS</th>\r\n          <th>ACTION</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr *ngFor=\"let Utilisateur of Utilisateurs\">\r\n          <td>{{ Utilisateur.id }}</td>\r\n          <td>{{ Utilisateur.userName }}</td>\r\n          <td>{{ Utilisateur.email }}</td>\r\n          <td>{{ Utilisateur.nom }}</td>\r\n          <td>{{ Utilisateur.prenom }}</td>\r\n          <td>{{ Utilisateur.status === true ? 'Activé' : 'Desactivé' }}</td>\r\n          <td>\r\n            &nbsp; <i (click)=\"onModifierClick(Utilisateur.id)\" [routerLink]=\"['/Utilisateur/ModifierUtilisateur']\" class=\"far fa-edit\" style=\"color: #e6c347;\"></i>\r\n            &nbsp; <i (click)=\"deleteUtilisateur(Utilisateur.id)\" class=\"far fa-trash-alt\" style=\"color: #de0707;\"></i>&nbsp;\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n\r\n\r\n  </div>\r\n</div>\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}