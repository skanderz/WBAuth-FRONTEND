{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { UtilisateurApplication } from '../../Models/utilisateurapplication.model';\nlet UtilisateurComponent = class UtilisateurComponent {\n  constructor(UAService, ApplicationService, UtilisateurService, router, route, ActionService, JournalisationService) {\n    this.UAService = UAService;\n    this.ApplicationService = ApplicationService;\n    this.UtilisateurService = UtilisateurService;\n    this.router = router;\n    this.route = route;\n    this.ActionService = ActionService;\n    this.JournalisationService = JournalisationService;\n    this.Utilisateurs = [];\n    this.rech = \"\";\n    this.IdApp = 0;\n    this.applications = [];\n    this.UtilisateurApp = new UtilisateurApplication();\n    this.UtilisateurApps = [];\n  }\n  ngOnInit() {\n    this.loadUtilisateur();\n  }\n  loadUtilisateur() {\n    this.UtilisateurService.getUtilisateurs().subscribe(data => {\n      this.Utilisateurs = data;\n    }, error => {\n      console.error('Erreur lors de la récupération des Utilisateur : ', error);\n    });\n  }\n  Recherche() {\n    if (this.rech == \"\") this.loadUtilisateur();else {\n      this.UtilisateurService.getUtilisateurs().subscribe(data => {\n        this.Utilisateurs = data;\n        this.Utilisateurs = this.Utilisateurs.filter(user => {\n          return user.userName.toLowerCase().includes(this.rech.toLowerCase()) || user.email.toLowerCase().includes(this.rech.toLowerCase()) || user.id.toLowerCase().includes(this.rech.toLowerCase());\n        });\n      });\n    }\n  }\n  onModifierClick(id) {\n    this.router.navigate(['Utilisateur/ModifierUtilisateur', id]);\n  }\n  deleteUtilisateur(id) {\n    if (confirm('Voulez-vous vraiment supprimer ce utilisateur ?')) {\n      this.UtilisateurService.getUtilisateur(id).subscribe(data => {\n        if (localStorage.getItem(\"username\") == data.userName) {\n          if (confirm('C\\'est votre compte ,Êtes-vous sûr(e) de vouloir le supprimer ?')) {\n            this.UtilisateurService.deleteUtilisateur(id).subscribe(() => {\n              this.UtilisateurService.logout();\n              this.router.navigate(['/AccueilPrincipale']);\n            });\n          }\n        } else {\n          this.UtilisateurService.deleteUtilisateur(id).subscribe(() => {\n            this.loadUtilisateur();\n          });\n        }\n      });\n    }\n  }\n};\nUtilisateurComponent = __decorate([Component({\n  selector: 'app-Utilisateur',\n  templateUrl: './Utilisateur.component.html'\n})], UtilisateurComponent);\nexport { UtilisateurComponent };","map":{"version":3,"mappings":"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","names":["Component","UtilisateurApplication","UtilisateurComponent","constructor","UAService","ApplicationService","UtilisateurService","router","route","ActionService","JournalisationService","ngOnInit","loadUtilisateur","getUtilisateurs","subscribe","data","Utilisateurs","error","console","Recherche","rech","filter","user","userName","toLowerCase","includes","email","id","onModifierClick","navigate","deleteUtilisateur","confirm","getUtilisateur","localStorage","getItem","logout","selector","templateUrl"],"sourceRoot":"","sources":["C:\\Users\\Skander\\source\\repos\\WBAuth.Frontend\\ClientApp\\src\\app\\Modules\\Utilisateur\\Utilisateur.component.ts"],"sourcesContent":["import { Component, Inject } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { UtilisateurService } from '../../Services/utilisateur.service';\r\nimport { UtilisateurApplicationService } from '../../Services/utilisateurapplication.service';\r\nimport { UtilisateurApplication } from '../../Models/utilisateurapplication.model';\r\nimport { ApplicationService } from '../../Services/application.service';\r\nimport { JournalisationService } from '../../../Services/journalisation.service';\r\nimport { ActionService } from '../../../Services/action.service';\r\nimport { Action } from '../../../Models/action.model';\r\n\r\n@Component({\r\n  selector: 'app-Utilisateur',\r\n  templateUrl: './Utilisateur.component.html'\r\n})\r\nexport class UtilisateurComponent {\r\n  Utilisateurs: any[] = [];\r\n  rech: string = \"\";\r\n  IdApp: number = 0;\r\n  applications: any[] = [];\r\n  UtilisateurApp: UtilisateurApplication = new UtilisateurApplication(); \r\n  UtilisateurApps: UtilisateurApplication[] = [];\r\n\r\n\r\n  constructor(private UAService: UtilisateurApplicationService, private ApplicationService: ApplicationService\r\n    ,private UtilisateurService: UtilisateurService, private router: Router, private route: ActivatedRoute,\r\n    ,private ActionService: ActionService, private JournalisationService: JournalisationService){}\r\n\r\n\r\n  ngOnInit(): void {\r\n    this.loadUtilisateur();\r\n  }\r\n\r\n\r\n\r\n  loadUtilisateur(){\r\n    this.UtilisateurService.getUtilisateurs().subscribe((data) => {\r\n      this.Utilisateurs = data;   \r\n    }, (error) => { console.error('Erreur lors de la récupération des Utilisateur : ', error); });\r\n  }\r\n  \r\n\r\n  Recherche(){\r\n    if (this.rech == \"\") this.loadUtilisateur();\r\n    else {\r\n      this.UtilisateurService.getUtilisateurs().subscribe((data) => {\r\n        this.Utilisateurs = data;\r\n        this.Utilisateurs = this.Utilisateurs.filter(user => {\r\n          return user.userName.toLowerCase().includes(this.rech.toLowerCase()) ||\r\n                 user.email.toLowerCase().includes(this.rech.toLowerCase()) ||\r\n                 user.id.toLowerCase().includes(this.rech.toLowerCase());\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  onModifierClick(id:string) { this.router.navigate(['Utilisateur/ModifierUtilisateur', id]); }\r\n\r\n\r\n  deleteUtilisateur(id: string) {\r\n    if (confirm('Voulez-vous vraiment supprimer ce utilisateur ?')) {\r\n      this.UtilisateurService.getUtilisateur(id).subscribe((data) => {\r\n        if (localStorage.getItem(\"username\") == data.userName) {\r\n          if(confirm('C\\'est votre compte ,Êtes-vous sûr(e) de vouloir le supprimer ?')){ \r\n            this.UtilisateurService.deleteUtilisateur(id).subscribe(() => {\r\n              this.UtilisateurService.logout();\r\n              this.router.navigate(['/AccueilPrincipale']);\r\n            });\r\n          }\r\n        }\r\n        else {\r\n          this.UtilisateurService.deleteUtilisateur(id).subscribe(() => {\r\n            this.loadUtilisateur();\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}