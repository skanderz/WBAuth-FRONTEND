{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../Services/role.service\";\nimport * as i2 from \"../../Services/application.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction RoleComponent_option_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const app_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", app_r2.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(app_r2.nom);\n  }\n}\nconst _c0 = function () {\n  return [\"/Role/ModifierRole\"];\n};\nfunction RoleComponent_table_18_tr_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8, \" \\u00A0 \");\n    i0.ɵɵelementStart(9, \"i\", 17);\n    i0.ɵɵlistener(\"click\", function RoleComponent_table_18_tr_12_Template_i_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const Role_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.onModifierClick(Role_r4.id));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \" \\u00A0 \");\n    i0.ɵɵelementStart(11, \"i\", 18);\n    i0.ɵɵlistener(\"click\", function RoleComponent_table_18_tr_12_Template_i_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const Role_r4 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.deleteRole(Role_r4.id));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\u00A0 \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const Role_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(Role_r4.nom);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(Role_r4.niveau);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(Role_r4.description);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(4, _c0));\n  }\n}\nfunction RoleComponent_table_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 15)(1, \"thead\")(2, \"tr\")(3, \"th\");\n    i0.ɵɵtext(4, \"ROLE\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"NIVEAU\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"DESCRIPTION\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"ACTION\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"tbody\");\n    i0.ɵɵtemplate(12, RoleComponent_table_18_tr_12_Template, 13, 5, \"tr\", 16);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.Roles);\n  }\n}\nconst _c1 = function () {\n  return [\"/Role/AjouterRole\"];\n};\nexport class RoleComponent {\n  constructor(RoleService, ApplicationService, router, route) {\n    this.RoleService = RoleService;\n    this.ApplicationService = ApplicationService;\n    this.router = router;\n    this.route = route;\n    this.Roles = [];\n    this.applications = [];\n    this.rech = '';\n    this.IdApp = 0;\n  }\n  ngOnInit() {\n    this.ApplicationService.getApplications().subscribe(data => {\n      this.applications = data;\n      if (this.applications && this.applications.length > 0) {\n        this.IdApp = this.applications[0].id;\n        this.loadRoles();\n      }\n    }, error => {\n      console.error('Erreur lors de la récupération des applications : ', error);\n    });\n  }\n  loadRoles() {\n    if (this.applications.length > 0) {\n      this.RoleService.getRoles(this.IdApp).subscribe(data => {\n        this.Roles = data;\n      }, error => {\n        console.error('Erreur lors de la récupération des Roles : ', error);\n      });\n    }\n  }\n  Recherche() {\n    if (this.rech == \"\") {\n      this.loadRoles();\n    } else {\n      this.RoleService.getRoles(this.IdApp).subscribe(data => {\n        this.Roles = data;\n        this.Roles = this.Roles.filter(r => {\n          return r.nom.toLowerCase().includes(this.rech.toLowerCase());\n        });\n      });\n    }\n  }\n  onModifierClick(id) {\n    this.router.navigate(['Role/ModifierRole', id]);\n  }\n  deleteRole(id) {\n    if (confirm('Voulez-vous vraiment supprimer ce Role ?')) {\n      this.RoleService.deleteRole(id, this.IdApp).subscribe(() => {\n        this.loadRoles();\n      });\n    }\n  }\n  static #_ = this.ɵfac = function RoleComponent_Factory(t) {\n    return new (t || RoleComponent)(i0.ɵɵdirectiveInject(i1.RoleService), i0.ɵɵdirectiveInject(i2.ApplicationService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RoleComponent,\n    selectors: [[\"app-Role\"]],\n    decls: 19,\n    vars: 6,\n    consts: [[1, \"background-titre\"], [1, \"centered-element\"], [1, \"content\"], [1, \"search-bar-and-add\"], [1, \"add-button\", 3, \"routerLink\"], [1, \"fas\", \"fa-plus\", 2, \"color\", \"#1ddd92\"], [\"type\", \"text\", \"placeholder\", \"Rechercher...\", 1, \"search-input\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [\"type\", \"submit\", 1, \"search-button\"], [1, \"fas\", \"fa-search\"], [1, \"choix-application\"], [\"for\", \"nom\", 2, \"transform\", \"translateX(-2px)\"], [\"id\", \"choix\", \"name\", \"choix\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"aria-labelledby\", \"tableLabel\", 4, \"ngIf\"], [3, \"value\"], [\"aria-labelledby\", \"tableLabel\"], [4, \"ngFor\", \"ngForOf\"], [1, \"far\", \"fa-edit\", 2, \"color\", \"#e6c347\", 3, \"routerLink\", \"click\"], [1, \"far\", \"fa-trash-alt\", 2, \"color\", \"#de0707\", 3, \"click\"]],\n    template: function RoleComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n        i0.ɵɵtext(2, \" GESTION DES R\\u00D4LES \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(3, \"div\", 1)(4, \"div\", 2)(5, \"div\", 3)(6, \"button\", 4);\n        i0.ɵɵelement(7, \"i\", 5);\n        i0.ɵɵtext(8, \" \\u00A0 AJOUTER \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"input\", 6);\n        i0.ɵɵlistener(\"ngModelChange\", function RoleComponent_Template_input_ngModelChange_9_listener($event) {\n          return ctx.rech = $event;\n        })(\"input\", function RoleComponent_Template_input_input_9_listener() {\n          return ctx.Recherche();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"button\", 7);\n        i0.ɵɵelement(11, \"i\", 8);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(12, \"br\");\n        i0.ɵɵelementStart(13, \"div\", 9)(14, \"label\", 10);\n        i0.ɵɵtext(15, \"APPLICATION :\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"select\", 11);\n        i0.ɵɵlistener(\"ngModelChange\", function RoleComponent_Template_select_ngModelChange_16_listener($event) {\n          return ctx.IdApp = $event;\n        })(\"ngModelChange\", function RoleComponent_Template_select_ngModelChange_16_listener() {\n          return ctx.loadRoles();\n        });\n        i0.ɵɵtemplate(17, RoleComponent_option_17_Template, 2, 2, \"option\", 12);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(18, RoleComponent_table_18_Template, 13, 1, \"table\", 13);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(5, _c1));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.rech);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngModel\", ctx.IdApp);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.applications);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.Roles);\n      }\n    },\n    dependencies: [i4.NgForOf, i4.NgIf, i5.NgSelectOption, i5.ɵNgSelectMultipleOption, i5.DefaultValueAccessor, i5.SelectControlValueAccessor, i5.NgControlStatus, i5.NgModel, i3.RouterLink],\n    encapsulation: 2\n  });\n}","map":{"version":3,"mappings":"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","names":["i0","RoleComponent","constructor","RoleService","ApplicationService","router","route","ngOnInit","getApplications","subscribe","data","applications","length","IdApp","id","loadRoles","error","console","getRoles","Roles","Recherche","rech","filter","r","nom","toLowerCase","includes","onModifierClick","navigate","deleteRole","confirm","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Skander\\source\\repos\\WBAuth.Frontend\\ClientApp\\src\\app\\Modules\\Role\\Role.component.html","C:\\Users\\Skander\\source\\repos\\WBAuth.Frontend\\ClientApp\\src\\app\\Modules\\Role\\Role.component.ts"],"sourcesContent":["<div class=\"background-titre\"> <h1> GESTION DES RÔLES </h1> </div>\r\n<div class=\"centered-element\">\r\n  <div class=\"content\">\r\n\r\n    <div class=\"search-bar-and-add\">\r\n      <button  class=\"add-button\" [routerLink]=\"['/Role/AjouterRole']\">\r\n        <i class=\"fas fa-plus\" style=\"color: #1ddd92;\"></i>  &nbsp;  AJOUTER\r\n      </button>\r\n      <input [(ngModel)]=\"rech\" (input)=\"Recherche()\" class=\"search-input\" type=\"text\" placeholder=\"Rechercher...\">\r\n      <button class=\"search-button\" type=\"submit\"><i class=\"fas fa-search\"></i></button>\r\n    </div>\r\n    <br />\r\n\r\n    <div class=\"choix-application\">\r\n      <label style=\"transform:translateX(-2px)\" for=\"nom\">APPLICATION :</label>\r\n      <select id=\"choix\" name=\"choix\" [(ngModel)]=\"IdApp\" (ngModelChange)=\"loadRoles()\">\r\n        <option *ngFor=\"let app of applications\" [value]=\"app.id\">{{ app.nom }}</option>\r\n      </select>\r\n    </div>\r\n\r\n\r\n    <table aria-labelledby=\"tableLabel\" *ngIf=\"Roles\">\r\n      <thead>\r\n        <tr>\r\n          <th>ROLE</th>\r\n          <th>NIVEAU</th>\r\n          <th>DESCRIPTION</th>\r\n          <th>ACTION</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr *ngFor=\"let Role of Roles\">\r\n          <td>{{ Role.nom }}</td>\r\n          <td>{{ Role.niveau }}</td>\r\n          <td>{{ Role.description }}</td>\r\n          <td>\r\n            &nbsp; <i (click)=\"onModifierClick(Role.id)\" [routerLink]=\"['/Role/ModifierRole']\" class=\"far fa-edit\" style=\"color: #e6c347;\"></i>\r\n            &nbsp; <i (click)=\"deleteRole(Role.id)\" class=\"far fa-trash-alt\" style=\"color: #de0707;\"></i>&nbsp;\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n\r\n  </div>\r\n</div>\r\n","import { Component, Inject } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Role } from '../../Models/role.model';\r\nimport { filter, Observable } from 'rxjs';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { RoleService } from '../../Services/role.service';\r\nimport { Application } from '../../Models/application.model';\r\nimport { ApplicationService } from '../../Services/application.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-Role',\r\n  templateUrl: './Role.component.html'\r\n})\r\nexport class RoleComponent {\r\n  Roles: any[] = [];\r\n  applications: any[] = [];\r\n  rech: string = '';\r\n  IdApp: number = 0;\r\n\r\n  constructor(private RoleService: RoleService, private ApplicationService: ApplicationService, private router: Router, private route: ActivatedRoute){}\r\n\r\n\r\n  ngOnInit(): void {\r\n    this.ApplicationService.getApplications().subscribe((data) => {\r\n      this.applications = data\r\n      if (this.applications && this.applications.length > 0) {\r\n        this.IdApp = this.applications[0].id;\r\n        this.loadRoles();\r\n      }\r\n    },\r\n      (error) => { console.error('Erreur lors de la récupération des applications : ', error); });\r\n  }\r\n\r\n\r\n  loadRoles() {\r\n    if (this.applications.length > 0) {\r\n      this.RoleService.getRoles(this.IdApp).subscribe((data) => { this.Roles = data; },\r\n        (error) => { console.error('Erreur lors de la récupération des Roles : ', error); });\r\n    }\r\n  }\r\n\r\n\r\n\r\n  Recherche() {\r\n    if (this.rech == \"\") { this.loadRoles(); }\r\n    else {\r\n      this.RoleService.getRoles(this.IdApp).subscribe((data) => {\r\n        this.Roles = data;\r\n        this.Roles = this.Roles.filter(r => { return r.nom.toLowerCase().includes(this.rech.toLowerCase()); });\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  onModifierClick(id: number) { this.router.navigate(['Role/ModifierRole', id]); }\r\n\r\n\r\n  deleteRole(id: number) {\r\n    if (confirm('Voulez-vous vraiment supprimer ce Role ?')) { this.RoleService.deleteRole(id, this.IdApp).subscribe(() => { this.loadRoles(); }); }\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}