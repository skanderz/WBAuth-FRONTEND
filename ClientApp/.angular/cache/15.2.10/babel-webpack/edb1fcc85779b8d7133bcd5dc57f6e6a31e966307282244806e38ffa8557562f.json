{"ast":null,"code":"import { FormGroup, FormControl, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../Services/utilisateurapplication.service\";\nimport * as i2 from \"../../Services/role.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../../Services/utilisateur.service\";\nimport * as i5 from \"../../Services/application.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nfunction AuthentificationComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.errorMessage, \" \");\n  }\n}\nfunction AuthentificationComponent_em_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"em\");\n    i0.ɵɵtext(1, \"Saisir le nom d'utilisateur !\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AuthentificationComponent_em_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"em\");\n    i0.ɵɵtext(1, \"Saisir le mot de passe !\");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function () {\n  return [\"/ForgotPassword\"];\n};\nconst _c1 = function () {\n  return [\"/Inscription\"];\n};\nexport class AuthentificationComponent {\n  constructor(UAService, RoleService, router, UtilisateurService, route, ApplicationService) {\n    this.UAService = UAService;\n    this.RoleService = RoleService;\n    this.router = router;\n    this.UtilisateurService = UtilisateurService;\n    this.route = route;\n    this.ApplicationService = ApplicationService;\n    this.errorMessage = '';\n    this.validateControl = controlName => {\n      return this.loginForm.get(controlName).invalid && this.loginForm.get(controlName).touched;\n    };\n    this.hasError = (controlName, errorName) => {\n      return this.loginForm.get(controlName).hasError(errorName);\n    };\n    this.loginUser = loginFormValue => {\n      this.showError = false;\n      const login = {\n        ...loginFormValue\n      };\n      const userForAuth = {\n        userName: login.userName,\n        password: login.password\n      };\n      this.UtilisateurService.login(userForAuth).subscribe({\n        next: res => {\n          localStorage.setItem(\"username\", login.userName);\n          const username = localStorage.getItem(\"username\");\n          this.UtilisateurService.Recherche(username).subscribe(userdata => {\n            this.UAService.getListByUtilisateur(userdata[0].id).subscribe(uadata => {\n              this.ApplicationService.Recherche(\"WBAuth\").subscribe(appdata => {\n                let app = uadata.filter(uaApp => uaApp.idApplication == appdata[0].id);\n                if (app[0].acces == false || userdata[0].status == false) {\n                  this.showError = true;\n                  if (userdata[0].status == false) {\n                    this.errorMessage = \"Votre compte est désactivé !\";\n                  } else if (app[0].acces == false) {\n                    this.errorMessage = \"Vous n'avez pas l'autorisation d'accéder à cette application !\";\n                  }\n                } else {\n                  if (uadata[0].idRole == null) {\n                    localStorage.setItem(\"role\", \"ROLE NON EFFECTUÉ\");\n                    localStorage.setItem(\"token\", res.token);\n                    this.UtilisateurService.sendAuthStateChangeNotification(res.isAuthSuccessful);\n                    this.router.navigate(['/Chargement']);\n                  } else {\n                    this.RoleService.getRole(uadata[0].idRole).subscribe(roledata => {\n                      localStorage.setItem(\"role\", roledata.nom);\n                      localStorage.setItem(\"token\", res.token);\n                      this.UtilisateurService.sendAuthStateChangeNotification(res.isAuthSuccessful);\n                      this.router.navigate(['/Chargement']);\n                    });\n                  }\n                }\n              });\n            });\n          });\n        },\n        error: err => {\n          this.errorMessage = err.message;\n          this.showError = true;\n        }\n      });\n    };\n  }\n  ngOnInit() {\n    if (localStorage.getItem('username')) this.router.navigate(['/Accueil']);\n    this.loginForm = new FormGroup({\n      userName: new FormControl(\"\", [Validators.required]),\n      password: new FormControl(\"\", [Validators.required])\n    });\n    this.returnUrl = this.route.snapshot.queryParams['returnUrl'] || '/';\n  }\n  static #_ = this.ɵfac = function AuthentificationComponent_Factory(t) {\n    return new (t || AuthentificationComponent)(i0.ɵɵdirectiveInject(i1.UtilisateurApplicationService), i0.ɵɵdirectiveInject(i2.RoleService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.UtilisateurService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i5.ApplicationService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AuthentificationComponent,\n    selectors: [[\"app-Auhtentification\"]],\n    decls: 26,\n    vars: 9,\n    consts: [[1, \"AccueilContent\", 2, \"display\", \"flex\", \"justify-content\", \"center\", \"align-items\", \"center\"], [\"src\", \"../../assets/Images/PC-AccueilPrincipale.png\", 2, \"width\", \"350px\", \"height\", \"350px\"], [2, \"display\", \"flex\", \"flex-direction\", \"column\", \"justify-content\", \"center\", \"align-items\", \"center\", \"margin\", \"0px 0px 0px -20px\"], [\"src\", \"../../assets/Images/WBConcept-AccueilPrincipale.png\", 2, \"width\", \"70%\"], [\"style\", \"max-width:600px;\", \"class\", \"alert alert-danger centered-element\", \"role\", \"alert\", 4, \"ngIf\"], [\"autocomplete\", \"off\", \"novalidate\", \"\", 1, \"register\", 3, \"formGroup\", \"ngSubmit\"], [4, \"ngIf\"], [\"type\", \"text\", \"placeholder\", \"NOM D'UTILISATEUR\", \"id\", \"userName\", \"name\", \"userName\", \"formControlName\", \"userName\", \"required\", \"\", 1, \"auth-field\"], [\"type\", \"password\", \"placeholder\", \"MOT DE PASSE\", \"id\", \"mdp\", \"name\", \"mdp\", \"formControlName\", \"password\", \"required\", \"\", 1, \"auth-field\"], [\"type\", \"submit\", 1, \"auth-btn\", 3, \"disabled\"], [1, \"mdp-oubli\\u00E9\", 2, \"transform\", \"translateY(-4px)\", 3, \"routerLink\"], [1, \"centered-element\", 2, \"margin-top\", \"7px\"], [\"src\", \"../../../../assets/Images/google-icon.png\", \"width\", \"40px\", \"height\", \"40px\", 2, \"border\", \"2px solid #100564\", \"background-color\", \"#F0F8FF\", \"border-radius\", \"100%\", \"padding\", \"5px\", \"cursor\", \"pointer\"], [2, \"width\", \"10%\"], [1, \"centered-element\", 2, \"background-color\", \"#F0F8FF\", \"border\", \"2px outset #100564\", \"border-radius\", \"100%\", \"cursor\", \"pointer\", \"width\", \"40px\", \"height\", \"40px\"], [1, \"fa-brands\", \"fa-facebook-f\", \"fa-xl\", 2, \"color\", \"#3A5794\"], [1, \"centered-element\", 2, \"background-color\", \"#F0F8FF\", \"border\", \"2px groove #100564\", \"border-radius\", \"100%\", \"cursor\", \"pointer\", \"width\", \"40px\", \"height\", \"40px\"], [1, \"fa-brands\", \"fa-linkedin-in\", \"fa-lg\", 2, \"color\", \"#0a66c2\"], [2, \"color\", \"#C4BDF6\", \"margin-bottom\", \"10px\"], [1, \"auth-inscri-btn\", 3, \"routerLink\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\", \"centered-element\", 2, \"max-width\", \"600px\"]],\n    template: function AuthentificationComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"img\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelement(3, \"img\", 3);\n        i0.ɵɵtemplate(4, AuthentificationComponent_div_4_Template, 2, 1, \"div\", 4);\n        i0.ɵɵelementStart(5, \"form\", 5);\n        i0.ɵɵlistener(\"ngSubmit\", function AuthentificationComponent_Template_form_ngSubmit_5_listener() {\n          return ctx.loginUser(ctx.loginForm.value);\n        });\n        i0.ɵɵtemplate(6, AuthentificationComponent_em_6_Template, 2, 0, \"em\", 6);\n        i0.ɵɵelement(7, \"input\", 7);\n        i0.ɵɵtemplate(8, AuthentificationComponent_em_8_Template, 2, 0, \"em\", 6);\n        i0.ɵɵelement(9, \"input\", 8);\n        i0.ɵɵelementStart(10, \"button\", 9);\n        i0.ɵɵtext(11, \"SE CONNECTER\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 10);\n        i0.ɵɵtext(13, \" Mot de passe oubli\\u00E9 ? \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"div\", 11);\n        i0.ɵɵelement(15, \"img\", 12)(16, \"div\", 13);\n        i0.ɵɵelementStart(17, \"div\", 14);\n        i0.ɵɵelement(18, \"i\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(19, \"div\", 13);\n        i0.ɵɵelementStart(20, \"div\", 16);\n        i0.ɵɵelement(21, \"i\", 17);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(22, \"div\", 18);\n        i0.ɵɵtext(23, \" \\u2022\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2022 \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"div\", 19);\n        i0.ɵɵtext(25, \" CR\\u00C9ER NOUVEAU COMPTE \");\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.showError);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.validateControl(\"userName\") && ctx.hasError(\"userName\", \"required\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.validateControl(\"password\") && ctx.hasError(\"password\", \"required\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"disabled\", !ctx.loginForm.valid);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(7, _c0));\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(8, _c1));\n      }\n    },\n    dependencies: [i6.NgIf, i7.ɵNgNoValidate, i7.DefaultValueAccessor, i7.NgControlStatus, i7.NgControlStatusGroup, i7.RequiredValidator, i7.FormGroupDirective, i7.FormControlName, i3.RouterLink],\n    encapsulation: 2\n  });\n}","map":{"version":3,"mappings":"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","names":["FormGroup","FormControl","Validators","i0","AuthentificationComponent","constructor","UAService","RoleService","router","UtilisateurService","route","ApplicationService","controlName","loginForm","get","invalid","touched","errorName","hasError","loginFormValue","showError","login","userForAuth","userName","password","subscribe","next","res","localStorage","setItem","username","getItem","Recherche","userdata","getListByUtilisateur","id","uadata","appdata","app","filter","uaApp","idApplication","acces","status","errorMessage","idRole","token","sendAuthStateChangeNotification","isAuthSuccessful","navigate","getRole","roledata","nom","error","err","message","ngOnInit","required","returnUrl","snapshot","queryParams","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Skander\\source\\repos\\WBAuth.Frontend\\ClientApp\\src\\app\\AccueilPrincipale\\Authentification\\Authentification.component.ts","C:\\Users\\Skander\\source\\repos\\WBAuth.Frontend\\ClientApp\\src\\app\\AccueilPrincipale\\Authentification\\Authentification.component.html"],"sourcesContent":["import { Component, NgModule, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { CommonModule } from '@angular/common';\r\nimport { UtilisateurService } from '../../Services/utilisateur.service';\r\nimport { RoleService } from '../../Services/role.service';\r\nimport { Utilisateur } from '../../Models/utilisateur.model';\r\nimport { RouterModule } from '@angular/router';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { Login } from './../../auth/login.interface';\r\nimport { Response } from './../../auth/response.interface';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { UtilisateurApplicationService } from '../../Services/utilisateurapplication.service';\r\nimport { ApplicationService } from '../../Services/application.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-Auhtentification',\r\n  templateUrl: './Authentification.component.html',\r\n})\r\n\r\nexport class AuthentificationComponent implements OnInit {\r\n  private returnUrl!: string;\r\n\r\n  loginForm!: FormGroup;\r\n  errorMessage: string = '';\r\n  showError!: boolean;\r\n  constructor(private UAService: UtilisateurApplicationService, private RoleService: RoleService, private router: Router,\r\n    private UtilisateurService: UtilisateurService, private route: ActivatedRoute, private ApplicationService: ApplicationService,){}\r\n\r\n\r\n  ngOnInit(): void {\r\n    if (localStorage.getItem('username')) this.router.navigate(['/Accueil']);\r\n    this.loginForm = new FormGroup({\r\n      userName: new FormControl(\"\", [Validators.required]),\r\n      password: new FormControl(\"\", [Validators.required])\r\n    })\r\n   this.returnUrl = this.route.snapshot.queryParams['returnUrl'] || '/';\r\n  }\r\n\r\n\r\n  validateControl = (controlName: string) => {\r\n    return this.loginForm.get(controlName)!.invalid && this.loginForm.get(controlName)!.touched\r\n  }\r\n\r\n\r\n  hasError = (controlName: string, errorName: string) => {\r\n    return this.loginForm.get(controlName)!.hasError(errorName)\r\n  }\r\n\r\n\r\n  loginUser = (loginFormValue : any) => {\r\n    this.showError = false;\r\n    const login = { ...loginFormValue };\r\n    const userForAuth: Login = {\r\n      userName: login.userName,\r\n      password: login.password\r\n    }\r\n    this.UtilisateurService.login(userForAuth).subscribe({\r\n      next: (res: Response) => {\r\n          localStorage.setItem(\"username\", login.userName);\r\n          const username = localStorage.getItem(\"username\");\r\n          this.UtilisateurService.Recherche(username).subscribe((userdata) => {\r\n            this.UAService.getListByUtilisateur(userdata[0].id).subscribe((uadata) => {\r\n              this.ApplicationService.Recherche(\"WBAuth\").subscribe((appdata) => {\r\n                let app = uadata.filter((uaApp) => uaApp.idApplication == appdata[0].id);\r\n                if (app[0].acces == false || userdata[0].status == false) {\r\n                  this.showError = true;\r\n                  if (userdata[0].status == false) { this.errorMessage = \"Votre compte est désactivé !\"; }\r\n                  else if (app[0].acces == false) { this.errorMessage = \"Vous n'avez pas l'autorisation d'accéder à cette application !\"; }\r\n                }\r\n                else { \r\n                  if (uadata[0].idRole == null) {\r\n                    localStorage.setItem(\"role\", \"ROLE NON EFFECTUÉ\");\r\n                    localStorage.setItem(\"token\", res.token);\r\n                    this.UtilisateurService.sendAuthStateChangeNotification(res.isAuthSuccessful);\r\n                    this.router.navigate(['/Chargement']);\r\n                  }\r\n                  else {\r\n                    this.RoleService.getRole(uadata[0].idRole).subscribe((roledata) => {\r\n                      localStorage.setItem(\"role\", roledata.nom);\r\n                      localStorage.setItem(\"token\", res.token);\r\n                      this.UtilisateurService.sendAuthStateChangeNotification(res.isAuthSuccessful);\r\n                      this.router.navigate(['/Chargement']);\r\n                    });\r\n                  }\r\n                }\r\n              });\r\n            });\r\n          });\r\n        },\r\n        error: (err: HttpErrorResponse) => {\r\n          this.errorMessage = err.message;\r\n          this.showError = true;\r\n        }\r\n      })\r\n  }\r\n\r\n\r\n\r\n\r\n}\r\n\r\n\r\n","<div class=\"AccueilContent\" style=\"display:flex; justify-content:center; align-items:center;\">\r\n\r\n  <img src=\"../../assets/Images/PC-AccueilPrincipale.png\" style=\"width:350px; height:350px\" />\r\n\r\n  <div style=\"display:flex; flex-direction:column; justify-content:center; align-items:center; margin:0px 0px 0px -20px;\">\r\n    <img src=\"../../assets/Images/WBConcept-AccueilPrincipale.png\" style=\"width:70%;\" />\r\n\r\n    <div style=\"max-width:600px;\" *ngIf=\"showError\" class=\"alert alert-danger centered-element\" role=\"alert\"> {{errorMessage}}  </div>\r\n\r\n    <form class=\"register\" [formGroup]=\"loginForm\" autocomplete=\"off\" novalidate (ngSubmit)=\"loginUser(loginForm.value)\">\r\n\r\n      <em *ngIf=\"validateControl('userName') && hasError('userName', 'required')\">Saisir le nom d'utilisateur !</em>\r\n      <input class=\"auth-field\" type=\"text\" placeholder=\"NOM D'UTILISATEUR\" id=\"userName\" name=\"userName\" formControlName=\"userName\" required>\r\n      <em *ngIf=\"validateControl('password') && hasError('password', 'required')\">Saisir le mot de passe !</em>\r\n      <input class=\"auth-field\" type=\"password\" placeholder=\"MOT DE PASSE\" id=\"mdp\" name=\"mdp\" formControlName=\"password\" required>\r\n\r\n      <button type=\"submit\" class=\"auth-btn\" [disabled]=\"!loginForm.valid\">SE CONNECTER</button>\r\n      <div class=\"mdp-oublié\" style=\"transform:translateY(-4px)\" [routerLink]=\"['/ForgotPassword']\">  Mot de passe oublié ? </div>\r\n\r\n      <div style=\"margin-top:7px\" class=\"centered-element\">\r\n        <img src=\"../../../../assets/Images/google-icon.png\" width=\"40px\" height=\"40px\" style=\"border: 2px solid #100564; background-color: #F0F8FF; border-radius: 100%; padding: 5px; cursor: pointer;\" />\r\n        <div style=\"width:10%;\"></div>\r\n        <div class=\"centered-element\" style=\"background-color: #F0F8FF; border:2px outset #100564; border-radius: 100%; cursor: pointer; width: 40px; height: 40px;\">\r\n          <i class=\"fa-brands fa-facebook-f fa-xl \" style=\"color: #3A5794;\"></i>\r\n        </div>\r\n        <div style=\"width:10%;\"></div>\r\n        <div class=\"centered-element\" style=\"background-color: #F0F8FF; border: 2px groove #100564; border-radius: 100%; cursor: pointer; width: 40px; height: 40px;\">\r\n          <i class=\"fa-brands fa-linkedin-in fa-lg\" style=\"color: #0a66c2;\"></i>\r\n        </div>\r\n      </div>\r\n\r\n      <div style=\"color:#C4BDF6; margin-bottom: 10px;\"> •────────────────────────• </div>\r\n      <div class=\"auth-inscri-btn\" [routerLink]=\"['/Inscription']\"> CRÉER NOUVEAU COMPTE </div>\r\n    </form>\r\n\r\n\r\n  </div>\r\n\r\n</div>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}